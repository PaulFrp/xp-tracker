{% extends "base.html" %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XP Tracker</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <nav style="background-color: #f8f9fa; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #ddd;">
        <div style="display: flex; gap: 15px; align-items: center;">
            <a href="{{ url_for('index') }}" style="text-decoration: none; font-weight: bold; color: #333;">🏠 Home</a>
            {% for category in ["Red", "Blue", "Green", "Gold"] %}
                <a href="/card_{{ category|lower }}" style="text-decoration: none; color: {{ category|lower }};">
                    {{ category }}
                </a>
            {% endfor %}
            <a  href=  "{{ url_for('titles')}}" style="text-decoration: none; font-weight: bold; color: #333"> Titles</a>
            <a  href=  "{{ url_for('badges')}}" style="text-decoration: none; font-weight: bold; color: #333"> Badges</a>
        </div>
        <div>
            <form method="POST" action="{{ url_for('logout') }}">
                <button type="submit" style="background-color: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">
                    Logout
                </button>
            </form>
        </div>
    </nav>

    <h1>🏅 Badges Unlocked</h1>
    
    {% if unlocked_badges %}
    <div class="badge-container">
        {% set badges_by_category = {} %}
        {% for badge in unlocked_badges %}
            {% set skill = badge['category'] %}
            {% set category = skill_to_category.get(skill, 'Unknown') %}
            {% if category not in badges_by_category %}
                {% set _ = badges_by_category.update({category: []}) %}
            {% endif %}
            {% set _ = badges_by_category[category].append(badge) %}
        {% endfor %}

        {% for category, badges in badges_by_category.items() %}
            <div class="badge-skill-box">
                <h2 class="category-title border-{{ category|lower }}">{{ category }}</h2>
                <div class="badge-grid">
                    {% for badge in badges %}
                        <div class="badgecard badge-border-{{ category|lower }}">
                            <img src="../{{ badge['image'] }}" alt="{{ badge['name'] }}" class="badge-image">
                            <span class="badge-title">{{ badge['name'] }}</span>
                            <p class="badge-description">{{ badge['description'] }}</p>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
    {% else %}
    <p>You haven't unlocked any badges yet. Keep leveling up!</p>
    {% endif %}
</body>
{% endblock %}

